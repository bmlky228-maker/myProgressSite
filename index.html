<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <title>قبول روليت ببطء</title>
    <style>
        body {
            font-family: Arial;
            background: #0b1220;
            color: white;
            padding: 20px;
        }

        .progress-container {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 30px;
            overflow: hidden;
            height: 50px;
            margin: 20px 0;
        }

        .progress-bar {
            height: 100%;
            width: 0;
            background: #0f85ff;
            transition: width 0.3s;
        }

        .percent-text {
            position: absolute;
            width: 100%;
            text-align: center;
            line-height: 50px;
            font-weight: bold;
        }

        .card {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
            max-height: 400px;
            overflow-y: auto;
            display: none;
            margin-top: 20px;
        }
    </style>
</head>

<body>
    <h2>مرحلة الانفتاح للقبولات</h2>

    <div class="progress-container">
        <div class="progress-bar" id="bar"></div>
        <div class="percent-text" id="text">0%</div>
    </div>

    <div id="results" class="card">
        <h2>موقع عرض قبول روليت</h2>
        <label>اختر الروليت:</label>
        <select id="provinceSelect">
            <option value="">-- اختر --</option>
        </select>
        <label>اختر الحرف:</label>
        <select id="schoolSelect">
            <option value="">-- اختر --</option>
        </select>
        <div id="resultsTable" class="card"></div>
    </div>

    <script>
        // بيانات الطلاب
        const data = {
            "روليت_أ": { "أ": [{ name: "جعفر", exam: "8479", result: "قبول" }, { name: "امير", exam: "4758", result: "قبول" }] },
            "روليت_ب": { "ب": [{ name: "مالك", exam: "3759", result: "قبول" }, { name: "ياسين", exam: "3759", result: "قبول" }] }
        };

        // تحميل الروليت
        const provinceSelect = document.getElementById("provinceSelect");
        const schoolSelect = document.getElementById("schoolSelect");
        const resultsTable = document.getElementById("resultsTable");
        Object.keys(data).forEach(prov => {
            let opt = document.createElement("option");
            opt.value = prov; opt.textContent = prov;
            provinceSelect.appendChild(opt);
        });
        provinceSelect.addEventListener("change", () => {
            schoolSelect.innerHTML = "<option value=''>-- اختر --</option>";
            resultsTable.innerHTML = "";
            const letters = data[provinceSelect.value] || {};
            Object.keys(letters).forEach(letter => {
                let opt = document.createElement("option");
                opt.value = letter; opt.textContent = letter;
                schoolSelect.appendChild(opt);
            });
        });
        schoolSelect.addEventListener("change", () => {
            resultsTable.innerHTML = "";
            const students = (data[provinceSelect.value] || {})[schoolSelect.value] || [];
            if (students.length === 0) { resultsTable.innerHTML = "<p>لا توجد نتائج</p>"; return; }
            let html = "<table><tr><th>الاسم</th><th>الرقم روليت</th><th>النتيجة</th></tr>";
            students.forEach(st => { html += `<tr><td>${st.name}</td><td>${st.exam}</td><td>${st.result}</td></tr>`; });
            html += "</table>";
            resultsTable.innerHTML = html;
        });

        // تحريك الشريط ببطء شديد لمدة ساعة تقريبًا
        const bar = document.getElementById("bar");
        const text = document.getElementById("text");
        let percent = 0;
        // ساعة = 3600 ثانية = 3600*1000 مللي ثانية، هنا نقسم على 100 للحصول على تحديث لكل 36 ثانية
        const interval = setInterval(() => {
            percent++;
            bar.style.width = percent + "%";
            text.innerText = percent + "%";
            if (percent >= 100) {
                clearInterval(interval);
                // اظهار النتائج عند اكتمال الشريط
                document.getElementById("results").style.display = "block";
            }
        }, 3); // تحديث كل 36 ثانية -> 100 * 36 = 3600 ثانية = ساعة
    </script>
</body>

</html>
